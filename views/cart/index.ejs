<%- include("../partials/header")%>
<% const sizes = {
  S : "Small",
  M : "Medium",
  L : "Large",
  XL : "Extra Large",
  XXL : "2 Extra Large"
} %>

<div id="main" class="main container mb-5">
  <div class="container py-2 my-4">
  <%if(session.productList && session.productList.length > 0){ %>
    <h3 class="pb-4"><i><u>Το καλάθι σου</u></i></h3>
    <% session.productList.forEach(function(item){ %>
    <% var id = item.product._id%>
    <div class="row d-flex justify-content-start mt-2 mb-4 mx-2">
      <div class="col-md-12 col-12 jumbotron-mini align-left">
        <div class="container">
          <button id="rmvc_<%=id%>" class="btn-danger Xbutton" onclick="removeProduct()">
            <i class="fa fa-trash-alt"></i>
          </button>
          <div class="row d-flex justify-content-start">
            <div class="col-11 align-left">
              <b style="font-size: 20px; font-weight:600; "><%=item.product.name%></b>
              <span class="ml-3">"<i><%=sizes[item.product.size]%></i>"</span>
            </div>
          </div>
          <div class="row d-flex justify-content-center mt-3">
            <div class="col-sm-2 col-12" align="center" >
              <div>
                <img src="<%= item.product.images[0].url %>" style="width:5em; height:7em;"></img>
              </div>
            </div>
            <div class="col-12 col-sm-10">
              <hr class="thin">
              <div class="row d-flex justify-content-center">

                <div class="col-3 col-sm-3" align="center">
                  <div> <b>Τιμή:</b> </div>
                  <div class="mt-2"> <%=item.product.price%> €</div>
                </div>    
                <div class="col-9 col-sm-6 pb-2" align="center">  
                  <div>
                    <B>Ποσότητα:</B>
                  </div>
                  <div class="def-number-input number-input safari_only bg-white">
                    <button onclick="this.parentNode.querySelector('input[type=number]').stepDown();qtyUpdate()" class="minus"></button>
                    <input id="<%=id%>" class="quantity" name="quantity" type="number" value="<%=item.quantity%>" min="1" onchange="qtyUpdate()">
                    <button onclick="this.parentNode.querySelector('input[type=number]').stepUp();qtyUpdate()" class="plus"></button>
                  </div>  
                </div>
                <div class="col-12 col-sm-3" align="center">
                  <hr class="thin nothidden">
                  <div>
                    <B>Σύνολο:</B>
                  </div>  
                  <div class="mt-2">
                    <span id="itm-prc<%=id%>"><%=item.price%> </span> <span> €</span> 
                  </div>
                </div>
              </div>
            </div> 
          </div> 
        </div>
      </div>
    </div>

    <%});%>
    <div class="container-fluid py-3">
      <div class="row d-flex justify-content-end">
      <div class="col-sm-6 col-12 align-right">
        <div class="row d-flex justify-content-end mr-2">
          <label class="mr-5">
            <B>Τελική Τιμή:</B>
          </label>
          <span class="totals-value" id="cart-total">
            <%=session.cart.totalPrice%>
          </span>        
        </div>
        <hr class="thin">
        <div class="row d-flex justify-content-end mr-2">
           <a href="/checkout" class="btn btn-primary">πληρωμη</a>
        </div>
      </div>
    </div>
    </div>  
  
    
    
  <%}else{ %>
  <div class="desc">
    Το καλάθι σας είναι άδειο
  </div> 
  <%}%>
  </div>
</div>

<!-- 
<div id="main" class="main container">
  <div id="cart-id" class="container main mb-5 cart-container">
    <%if(session.productList && session.productList.length > 0){ %>
      <div class="shopping-cart">
      <% session.productList.forEach(function(item){ %>
        <div class="product jumbotron-mini">
          <div class="product-image">
            <img src="<%=	item.product.images[0].url %>"></img>
          </div>
          <div class="product-details">
            <div class="product-title mt-1">
              <%=item.product.name%>
              <i><span class="ml-5"> Μέγεθος: '<%=item.product.size%>' </span></i>
            </div>
            <p class="product-description">
              <%=item.product.description%>
            </p>
          </div>
          <div class="product-price" style="margin-top: 0.3em;">
            Τιμή: <%=item.product.price%>
          </div>
          <div class="product-quantity">
            <% var id = item.product._id%>
            <input id="<%=id%>" type="number" value="<%=item.quantity%>" style="width: 3em;" min="1" onchange="qtyUpdate()">
          </div>
          <div class="product-removal" style="margin-top: 0.15em;">
            <button id="rmvc_<%=id%>" class="remove-product btn-danger" onclick="removeProduct()">
              Αφαίρεση
            </button>
          </div>
          <div id="itm-prc<%=id%>" class="product-line-price" style="margin-top: 0.15em;">
           Τελ. Τιμή: <%=item.price%>
          </div>
        </div>
       <%});%>
       <div class="totals">
         <div class="totals-item">
           <label>
             Έξοδα Αποστολής
           </label>
           <div class="totals-value" id="cart-shipping">
             0.0
           </div>
         </div>
         <div class="totals-item totals-item-total">
           <label>
              Τελική Τιμή
           </label>
           <div class="totals-value" id="cart-total">
             <%=session.cart.totalPrice%>
           </div>
         </div>
       </div>


   
    </div>
    <div class="row justify-content-end">
      <div class="col-5">
        <hr class="mr-auto">
      </div>
    </div>
    <div class="row d-flex justify-content-end mr-2">
      <a href="/checkout" class="btn btn-primary">πληρωμη</a>
    </div>
    <%}else{ %>
      Το καλάθι σας είναι άδειο
    <%}%>
  </div>
</div>   -->
<%- include("../partials/footer")%>
